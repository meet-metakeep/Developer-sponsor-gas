<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaKeep Demo: Gas Sponsorship for USDC Transfer</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- MetaKeep SDK -->
    <script src="https://cdn.jsdelivr.net/npm/metakeep@2.2.8/lib/index.js"
            integrity="sha256-dVJ6hf8zqdtHxHJCDJnLAepAyCCbu6lCXzZS3lqMIto="
            crossorigin="anonymous"></script>
    
    <!-- Solana Web3.js -->
    <script src="https://unpkg.com/@solana/web3.js@1.87.6/lib/index.iife.min.js"></script>
    
    <!-- Configuration -->
    <script src="config.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1> MetaKeep Gas Sponsorship Demo</h1>
            <p>Developer-sponsored USDC transfer on Solana Devnet</p>
        </header>

        <div class="wallet-section">
            <div class="wallet-card">
                <h3>üë§ User A</h3>
                <div class="wallet-info">
                    <p><strong>Address:</strong> <span id="userAAddress">Loading...</span></p>
                    <p><strong>SOL Balance:</strong> <span id="userASOL">Loading...</span></p>
                    <p><strong>USDC Balance:</strong> <span id="userAUSDC">Loading...</span></p>
                </div>
            </div>

            <div class="wallet-card">
                <h3>üë§ User B</h3>
                <div class="wallet-info">
                    <p><strong>Address:</strong> <span id="userBAddress">Loading...</span></p>
                    <p><strong>SOL Balance:</strong> <span id="userBSOL">Loading...</span></p>
                    <p><strong>USDC Balance:</strong> <span id="userBUSDC">Loading...</span></p>
                </div>
            </div>

            <div class="wallet-card developer">
                <h3>üõ†Ô∏è Developer Wallet</h3>
                <div class="wallet-info">
                    <p><strong>Address:</strong> <span id="devAddress">Loading...</span></p>
                    <p><strong>SOL Balance:</strong> <span id="devSOL">Loading...</span></p>
                    <p><strong>USDC Balance:</strong> <span id="devUSDC">Loading...</span></p>
                </div>
            </div>
        </div>

        <div class="action-section">
            <button id="refreshBalances" class="btn btn-secondary"> Refresh Balances</button>
            <button id="transferUSDC" class="btn btn-primary"> Transfer 0.01 USDC (A ‚Üí B)</button>
        </div>

        <div class="status-section">
            <div id="statusMessage" class="status-text"></div>
            
            <!-- USDC Insufficient Warning -->
            <div id="usdcWarning" class="usdc-warning" style="display: none;">
                <h4>Insufficient USDC Balance</h4>
                <p>User A has insufficient USDC on devnet. Please fund this wallet with devnet USDC to see the demo in action.</p>
                <p><strong>Current Balance:</strong> <span id="currentUSDCBalance">0.00 USDC</span></p>
                <p><strong>Required:</strong> 0.01 USDC</p>
            </div>
            
            <!-- User A's signed message -->
            <div id="userSignedMessage" class="signed-message" style="display: none;">
                <h4> User A's Signed Message</h4>
                <p class="signature-text"></p>
            </div>
            
            <!-- Developer's signature -->
            <div id="developerSignature" class="signed-message" style="display: none;">
                <h4>üõ†Ô∏è Developer's Transaction Signature</h4>
                <p class="signature-text"></p>
            </div>
            
            <!-- Final transaction details -->
            <div id="transactionInfo" class="transaction-info" style="display: none;">
                <h4> Transaction Details</h4>
                <p><strong>Transaction ID:</strong> <span id="txSignature"></span></p>
                <p><strong>Solscan:</strong> <a id="solscanLink" href="#" target="_blank">View on Solscan</a></p>
            </div>
        </div>


    </div>

    <script src="script.js"></script>
</body>
</html> 